<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STQRY API Demo - Alle Functionaliteit</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        h2 {
            color: #4CAF50;
            margin-top: 30px;
        }
        .api-section {
            margin: 20px 0;
            padding: 20px;
            background-color: #f9f9f9;
            border-left: 4px solid #4CAF50;
            border-radius: 4px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            padding: 10px 20px;
            font-size: 14px;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        button.secondary {
            background-color: #2196F3;
        }
        button.secondary:hover {
            background-color: #0b7dda;
        }
        .output {
            margin-top: 15px;
            padding: 15px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .info {
            padding: 15px;
            background-color: #e7f3fe;
            border-left: 4px solid #2196F3;
            margin: 20px 0;
        }
        input, select {
            padding: 8px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background-color: #4CAF50;
            color: white;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ STQRY API Demo</h1>
        <p>Demonstratie van alle STQRY Bridge functionaliteit</p>

        <div class="info">
            <strong>Runtime Mode:</strong> <span id="runtime" class="badge">Detecteren...</span><br>
            <strong>Beschikbare APIs:</strong> Storage, User, Device, Language, Location, Utils
            <br><br>
            <strong>Andere pagina's:</strong>
            <a href="page1.html">Pagina 1 (Storage Set)</a> |
            <a href="page2.html">Pagina 2 (Storage Read)</a>
        </div>
    </div>

    <!-- Storage API -->
    <div class="container">
        <h2>üì¶ Storage API</h2>
        <div class="api-section">
            <h3>Data Opslaan en Ophalen</h3>
            <input type="text" id="storageKey" placeholder="Key" value="myData">
            <input type="text" id="storageValue" placeholder="Value" value="Hello World">
            <button onclick="testStorageSet()">Set</button>
            <button onclick="testStorageGet()" class="secondary">Get</button>
            <button onclick="testStorageRemove()" class="secondary">Remove</button>
            <button onclick="testStorageClear()" class="secondary">Clear All</button>
            <div id="storageOutput" class="output">Klik op een knop om storage te testen...</div>
        </div>
    </div>

    <!-- User API -->
    <div class="container">
        <h2>üë§ User API</h2>
        <div class="api-section">
            <h3>Gebruikers Informatie</h3>
            <button onclick="testUserGet()">Get User Info</button>
            <button onclick="testUserSet()" class="secondary">Set Custom User</button>
            <div id="userOutput" class="output">Klik op "Get User Info" om gebruikersgegevens te zien...</div>
        </div>
    </div>

    <!-- Device API -->
    <div class="container">
        <h2>üì± Device API</h2>
        <div class="api-section">
            <h3>Device Informatie</h3>
            <button onclick="testDeviceGet()">Get Device Info</button>
            <div id="deviceOutput" class="output">Klik op "Get Device Info" om apparaat informatie te zien...</div>
        </div>
    </div>

    <!-- Language API -->
    <div class="container">
        <h2>üåç Language API</h2>
        <div class="api-section">
            <h3>Taal Instellingen</h3>
            <button onclick="testLanguageGet()">Get Current Language</button>
            <select id="languageSelect">
                <option value="nl">Nederlands</option>
                <option value="en">English</option>
                <option value="de">Deutsch</option>
                <option value="fr">Fran√ßais</option>
            </select>
            <button onclick="testLanguageSet()" class="secondary">Set Language</button>
            <div id="languageOutput" class="output">Klik op "Get Current Language"...</div>
        </div>
    </div>

    <!-- Location API -->
    <div class="container">
        <h2>üìç Location API</h2>
        <div class="api-section">
            <h3>Navigatie en Locatie</h3>
            <button onclick="testLocationGet()">Get Current Location</button>
            <input type="text" id="locationUrl" placeholder="URL" value="page1.html">
            <button onclick="testLocationSet()" class="secondary">Navigate (set)</button>
            <div id="locationOutput" class="output">Klik op "Get Current Location"...</div>
        </div>
    </div>

    <!-- Utils API -->
    <div class="container">
        <h2>üîß Utils API</h2>
        <div class="api-section">
            <h3>Utility Functies</h3>
            <button onclick="testUtils()">Test All Utils</button>
            <div id="utilsOutput" class="output">Klik op "Test All Utils"...</div>
        </div>
    </div>

    <!-- All APIs Test -->
    <div class="container">
        <h2>üß™ Complete API Test</h2>
        <div class="api-section">
            <button onclick="testAllAPIs()" style="background-color: #ff6b6b; font-size: 16px; padding: 15px 30px;">
                Test Alle APIs Tegelijk
            </button>
            <div id="allApisOutput" class="output">Klik op de knop om alle APIs te testen...</div>
        </div>
    </div>

    <script src="stqry-bridge.js"></script>
    <script>
        // Display runtime mode
        document.getElementById('runtime').textContent = window.stqryRuntime;

        // Storage API Tests
        function testStorageSet() {
            const key = document.getElementById('storageKey').value;
            const value = document.getElementById('storageValue').value;
            const changeset = {};
            changeset[key] = value;

            window.stqry.storage.set(changeset, function() {
                document.getElementById('storageOutput').textContent =
                    '‚úì Opgeslagen:\n' + JSON.stringify(changeset, null, 2);
            });
        }

        function testStorageGet() {
            const key = document.getElementById('storageKey').value;

            window.stqry.storage.get(key, function(value) {
                document.getElementById('storageOutput').textContent =
                    '‚úì Opgehaald:\nKey: ' + key + '\nValue: ' + JSON.stringify(value, null, 2);
            });
        }

        function testStorageRemove() {
            const key = document.getElementById('storageKey').value;

            window.stqry.storage.remove(key, function() {
                document.getElementById('storageOutput').textContent =
                    '‚úì Verwijderd: ' + key;
            });
        }

        function testStorageClear() {
            window.stqry.storage.clear(function() {
                document.getElementById('storageOutput').textContent =
                    '‚úì Alle storage data gewist!';
            });
        }

        // User API Tests
        function testUserGet() {
            window.stqry.user.get(function(user) {
                document.getElementById('userOutput').textContent =
                    '‚úì User Info:\n' + JSON.stringify(user, null, 2);
            });
        }

        function testUserSet() {
            const customUser = {
                id: 'user-' + Date.now(),
                name: 'Max Dammers',
                email: 'max@example.com',
                role: 'admin',
                isGuest: false
            };

            window.stqry.user.set(customUser, function() {
                document.getElementById('userOutput').textContent =
                    '‚úì Custom user ingesteld:\n' + JSON.stringify(customUser, null, 2);
            });
        }

        // Device API Tests
        function testDeviceGet() {
            window.stqry.device.get(function(device) {
                document.getElementById('deviceOutput').textContent =
                    '‚úì Device Info:\n' + JSON.stringify(device, null, 2);
            });
        }

        // Language API Tests
        function testLanguageGet() {
            window.stqry.language.get(function(lang) {
                document.getElementById('languageOutput').textContent =
                    '‚úì Huidige taal: ' + lang;
            });
        }

        function testLanguageSet() {
            const lang = document.getElementById('languageSelect').value;

            window.stqry.language.set(lang, function() {
                document.getElementById('languageOutput').textContent =
                    '‚úì Taal ingesteld op: ' + lang;
            });
        }

        // Location API Tests
        function testLocationGet() {
            window.stqry.location.get(function(location) {
                // Maak een meer leesbare output met alle location details
                const output = [
                    '‚úì Location Info:',
                    '',
                    'Full URL: ' + location.href,
                    'Protocol: ' + window.location.protocol,
                    'Host: ' + location.host,
                    'Pathname: ' + location.pathname,
                    'Search: ' + (location.search || '(geen query params)'),
                    'Hash: ' + (location.hash || '(geen hash)'),
                    '',
                    '--- Raw Data ---',
                    JSON.stringify(location, null, 2)
                ].join('\n');

                document.getElementById('locationOutput').textContent = output;
            });
        }

        function testLocationSet() {
            const url = document.getElementById('locationUrl').value;
            if (confirm('Navigeren naar: ' + url + '?')) {
                window.stqry.location.set(url);
            }
        }

        // Utils API Tests
        function testUtils() {
            const output = {
                runtime: window.stqry.utils.getRuntime(),
                isStandalone: window.stqry.utils.isStandalone(),
                isIFrame: window.stqry.utils.isIFrame(),
                isReactNative: window.stqry.utils.isReactNative()
            };

            document.getElementById('utilsOutput').textContent =
                '‚úì Utils Info:\n' + JSON.stringify(output, null, 2);
        }

        // Test All APIs
        function testAllAPIs() {
            const output = document.getElementById('allApisOutput');
            output.textContent = 'Testing alle APIs...\n\n';

            // Storage
            window.stqry.storage.set({ demo: 'test' }, function() {
                output.textContent += '‚úì Storage: OK\n';
            });

            // User
            window.stqry.user.get(function(user) {
                output.textContent += '‚úì User: ' + user.name + '\n';
            });

            // Device
            window.stqry.device.get(function(device) {
                output.textContent += '‚úì Device: ' + device.platform + ' - ' + device.os + '\n';
            });

            // Language
            window.stqry.language.get(function(lang) {
                output.textContent += '‚úì Language: ' + lang + '\n';
            });

            // Location
            window.stqry.location.get(function(location) {
                output.textContent += '‚úì Location: ' + location.pathname;
                if (location.search) output.textContent += location.search;
                if (location.hash) output.textContent += location.hash;
                output.textContent += '\n';
            });

            // Utils
            output.textContent += '‚úì Runtime: ' + window.stqry.utils.getRuntime() + '\n';

            output.textContent += '\n‚úÖ Alle tests voltooid!';
        }

        // Listen for language changes
        window.addEventListener('stqryLanguageChanged', function(e) {
            console.log('Language changed to:', e.detail.language);
            alert('Taal gewijzigd naar: ' + e.detail.language);
        });

        // Auto-load user info on page load
        testUserGet();
    </script>
</body>
</html>
